



TRAM                                                            T. Reddy
Internet-Draft                                           R. Ravindranath
Intended status: Standards Track                                 D. Wing
Expires: October 5, 2014                                   Cisco Systems
                                                            P. Martinsen
                                                                   Cisco
                                                           April 3, 2014


             TURN extension to convey flow characteristics
                   draft-reddy-tram-turn-flowdata-00

Abstract

   This document defines a mechanism for a TURN client to signal flow
   characteristics to a TURN server, and the TURN server in turn uses
   this to prioritize the channels accordingly.  The mechanism defines a
   new comprehensive optional STUN attribute that MAY be carried in
   ChannelBind STUN message to convey the flowdata.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on October 5, 2014.

Copyright Notice

   Copyright (c) 2014 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must



Reddy, et al.            Expires October 5, 2014                [Page 1]

Internet-Draft                TURN flowdata                   April 2014


   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Terminology . . . . . . . . . . . . . . . . . . . . . . . . .   3
   3.  Solution Overview . . . . . . . . . . . . . . . . . . . . . .   3
     3.1.  Usage . . . . . . . . . . . . . . . . . . . . . . . . . .   3
     3.2.  Generating a ChannelBind message with TURN-FLOWDATA
           attribute . . . . . . . . . . . . . . . . . . . . . . . .   3
     3.3.  Processing a Request with TURN-FLOWDATA attribute . . . .   4
   4.  TURN-FLOWDATA format  . . . . . . . . . . . . . . . . . . . .   4
   5.  Security Considerations . . . . . . . . . . . . . . . . . . .   5
   6.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   6
   7.  Acknowledgement . . . . . . . . . . . . . . . . . . . . . . .   6
   8.  Normative References  . . . . . . . . . . . . . . . . . . . .   6
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   7

1.  Introduction

   TURN [RFC5245] is a protocol that is often used to improve the
   connectivity of P2P applications.  By providing a cloud-based relay
   service, TURN ensures that a connection can be established even when
   one or both sides is incapable of a direct P2P connection.  TURN
   server is a building block to support interactive, real-time
   communication using audio, video, collaboration, games, etc., between
   two peer web browsers using the Web Real-Time communication (WebRTC)
   [I-D.ietf-rtcweb-overview] framework.  The use-case explained in
   "Simple Video Communication Service, enterprise aspects"
   (Section 3.2.5 of [I-D.ietf-rtcweb-use-cases-and-requirements])
   refers to deploying a TURN[RFC5766] server in the DMZ to audit all
   media sessions from inside an Enterprise premises to any external
   peer.

   When TURN is used for all media sessions it can result in becoming a
   bottle neck and create problems like latency, delay e.t.c. So there
   is a need to have the server to prioritise flows.  This draft propose
   a method by which a TURN client can signal flow characteristics to a
   TURN server, and the TURN server in turn uses this to prioritise the
   channels accordingly

   When a session is first established, WebRTC implementations are
   required to perform STUN connectivity checks as part of ICE
   [RFC5245].  That initial consent is not described further in this
   document and it is assumed that ICE is being used for that initial
   consent.



Reddy, et al.            Expires October 5, 2014                [Page 2]

Internet-Draft                TURN flowdata                   April 2014


   Related to consent is loss of connectivity ("liveness").  Many
   applications want notification of connection loss to take appropriate
   actions (e.g., alert the user, try switching to a different
   interface).

   This document describes a new STUN usage with a request and response
   messages which verifies the remote peer's consent to receive traffic,
   and can also detect loss of liveness.

2.  Terminology

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].

   The reader is expected to be aware of STUN[RFC5389] and TURN[RFC5766]
   concepts and terminology.

3.  Solution Overview

   A new comprehensive optional STUN attribute called TURN-FLOWDATA is
   described as part of this draft.  If a TURN Client wishes to indicate
   its flow characteristics it MUST insert this attribute in ChannelBind
   STUN method only.  Other specifications may extend to have this
   attribute in other STUN methods.

3.1.  Usage

   A client that needs TURN service and also wishes to have the TURN
   server prioritise its flow MAY use this attribute.  This attribute if
   used MUST be sent only in the ChannelBind STUN method.  Since the
   client discloses its flow characteristics via the flowdata attribute
   it is RECOMMENDED the client and TURN server authorise each other
   during the Allocate STUN request/response.  The endpoint MAY use the
   authentication methods described in [RFC5766] or use the Third party
   Authorization mechanism described in
   [I-D.reddy-tram-turn-third-party-authz].

3.2.  Generating a ChannelBind message with TURN-FLOWDATA attribute

   After the Allocate request/response a relayed transport address
   granted to a client through an Allocate request, along with related
   state, such as permissions and expiration timers.  A client can then
   choose to use either Send and Data STUN methods or Channels to
   exchange data with its peer.  For bandwidth intensive applications
   like video, webRTC a Send indication or Data indication(which adds 36
   bytes overhead) can substantially increase the bandwidth required
   between the client and the server.  Hence Channels are commonly used



Reddy, et al.            Expires October 5, 2014                [Page 3]

Internet-Draft                TURN flowdata                   April 2014


   for bandwidth intensive applications to exchange data.  In this
   specification we will focus on indicating Flowdata only in Channel
   messages.

   When sending a ChannelBind request to the server a Client includes
   CHANNEL-NUMBER and an XOR-PEER-ADDRESS(that represents peer transport
   address) attribute.  Along with this TURN-FLOWDATA attribute will be
   added.  The new attribute will have a type(TBD) and length of 4
   bytes.  It will indicate Delay, Loss and Jitter for both Upstream and
   Downstream which the client desires to have.

   When ChannelBind is refreshed (every 10 mins as per [RFC5766]), the
   client MUST add TURN-FLOWDATA attribute in each refresh.  TBD: Is it
   really needed to indicate Flow characteristics each time in refresh
   message?  Alternatively a Client can just send normal ChannelBind and
   attach FLOWDATA attribute only when the flow characteristics changes

   TBD: What if the Delay, Loss or Jitter requirements of Client changes
   mid call and before ChannelBind expires ? Does the client has to wait
   till ChannelBind expires before it indicates new values ?

3.3.  Processing a Request with TURN-FLOWDATA attribute

   When a TURN Server receives a ChannelBind message it will validate
   the CHANNEL-NUMBER and XOR-PEER-ADDRESS attributes as per [RFC5766].
   If the message has a TURN-FLOWDATA attribute the Server will
   determine if it can provide the desired Upstream/Downstream Delay,
   Loss and Jitter as requested by the client.  If the Server can
   provide the same it will respond to the ChannelBind as per the
   [RFC5766].  The TURN server then will provide the requested flow
   characteristics for that flow towards the peer identified by XOR-
   PEER-ADDRESS.

   If the Server cannot provide the desired flow characteristics then it
   will send a response a 508 (Insufficient Capacity) error TBD: Do we
   need a new error code ?

   TBD: What should be the Server behaviour if it receives a refresh
   ChannelBind with no TURN-FLOWDATA attribute ? What should be server
   behaviour if it receives refresh ChanelBind message with new values
   in TURN-FLOWDATA ?

4.  TURN-FLOWDATA format

   This section describes the format of the new STUN attribute TURN-
   FLOWDATA.





Reddy, et al.            Expires October 5, 2014                [Page 4]

Internet-Draft                TURN flowdata                   April 2014


                 The FLOWDATA option request has the following format.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Attribute Type (TBD)      |          Length (4)               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | uDT | uLT | uJT |   RSVD1     | dDT | dLT | dJT |    RSVD2    |
      +---------------------------------------------------------------+


                      Figure 1: FW-FLOWDATA Attribute

   uDT:  Upstream Delay Tolerance, 0=no information available, 1=very
      low, 2=low, 3=medium, 4=high.

   uLT:  Upstream Loss Tolerance, 0=no information available, 1=very
      low, 2=low, 3=medium, 4=high.

   uJT:  Upstream Jitter Tolerance, 0=no information available, 1=very
      low, 2=low, 3=medium, 4=high.

   RSVD1:  Reserved (7 bits), MUST be ignored on reception and MUST be 0
      on transmission.

   dDT:  Downstream Delay Tolerance, 0=no information available, 1=very
      low, 2=low, 3=medium, 4=high.

   dLT:  Downstream Loss Tolerance, 0=no information available, 1=very
      low, 2=low, 3=medium, 4=high.

   dJT:  Downstream Jitter Tolerance, 0=no information available, 1=very
      low, 2=low, 3=medium, 4=high.

   RSVD2:  Reserved (7 bits), MUST be ignored on reception and MUST be 0
      on transmission.

5.  Security Considerations

   On some networks, only certain users or certain applications are
   authorized to signal the priority of a flow.  This authorization can
   be achieved with TURN third party
   authentication[I-D.reddy-tram-turn-third-party-authz].

   For STUN requests or responses that are not sent using TLS or DTLS
   transport, the TURN-FLOWDATA attribute contains information to an
   eavesdropper who could use it to learn about the nature of a session
   to be established.  For example, they might be able to deduce from



Reddy, et al.            Expires October 5, 2014                [Page 5]

Internet-Draft                TURN flowdata                   April 2014


   the bandwidth requested that the session is likely to be audio only,
   or audio and video.

   The TURN-FLOWDATA attribute will have integrity protection from the
   MESSAGE- INTEGRITY attribute and hence a eavesdropper may not be able
   to tamper it.

6.  IANA Considerations

   This document does not require any action from IANA.

7.  Acknowledgement

   TBD.

8.  Normative References

   [I-D.ietf-rtcweb-overview]
              Alvestrand, H., "Overview: Real Time Protocols for Brower-
              based Applications", draft-ietf-rtcweb-overview-09 (work
              in progress), February 2014.

   [I-D.ietf-rtcweb-use-cases-and-requirements]
              Holmberg, C., Hakansson, S., and G. Eriksson, "Web Real-
              Time Communication Use-cases and Requirements", draft-
              ietf-rtcweb-use-cases-and-requirements-14 (work in
              progress), February 2014.

   [I-D.reddy-tram-turn-third-party-authz]
              Reddy, T., Patil, P., R, R., and J. Uberti, "TURN
              Extension for Third Party Authorization", draft-reddy-
              tram-turn-third-party-authz-00 (work in progress),
              February 2014.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC5245]  Rosenberg, J., "Interactive Connectivity Establishment
              (ICE): A Protocol for Network Address Translator (NAT)
              Traversal for Offer/Answer Protocols", RFC 5245, April
              2010.

   [RFC5389]  Rosenberg, J., Mahy, R., Matthews, P., and D. Wing,
              "Session Traversal Utilities for NAT (STUN)", RFC 5389,
              October 2008.






Reddy, et al.            Expires October 5, 2014                [Page 6]

Internet-Draft                TURN flowdata                   April 2014


   [RFC5766]  Mahy, R., Matthews, P., and J. Rosenberg, "Traversal Using
              Relays around NAT (TURN): Relay Extensions to Session
              Traversal Utilities for NAT (STUN)", RFC 5766, April 2010.

Authors' Addresses

   Tirumaleswar Reddy
   Cisco Systems
   Cessna Business Park, Varthur Hobli
   Sarjapur Marathalli Outer Ring Road
   Bangalore, Karnataka  560103
   India

   Email: tireddy@cisco.com


   Ram Mohan Ravindranath
   Cisco Systems
   Cessna Business Park
   Sarjapur-Marathahalli Outer Ring Road
   Bangalore, Karnataka  560103
   India

   Email: rmohanr@cisco.com


   Dan Wing
   Cisco Systems
   821 Alder Drive
   Milpitas, California  95035
   USA

   Email: dwing@cisco.com


   Paal-Erik Martinsen
   Cisco Systems, Inc.
   Philip Pedersens Vei 22
   Lysaker, Akershus  1325
   Norway

   Email: palmarti@cisco.com









Reddy, et al.            Expires October 5, 2014                [Page 7]
